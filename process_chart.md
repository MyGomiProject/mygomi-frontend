# 마이고미(MAIGOMI) — 6주 공정도 (메인 페이지: 검색+캘린더+지도 우선 반영)

목표
- 메인 페이지에서
    - 상단: 품목 검색(배출 방법 안내)
    - 좌하단: 내 지역 수거 캘린더
    - 우하단: 주변 나눔 물품 지도 핀(보기 좋게)
      를 **최소 기능이라도 조기에 완성**하여 “서비스 형태”를 빠르게 고정한다.

핵심 전략
- 지도 기능을 “한 번에 끝내려 하지 않는다.”
- W3까지는 **지도 조회(READ) + 핀 렌더링(초기형)**만 만든다.
- W4~W5에 게시판/채팅과 결합하여 “진짜 커뮤니티 지도”로 확장한다.

---

## 1) 재정의된 MVP(발표용 최소 완성)
아래 3가지는 **W3 종료 시점에 반드시 데모 가능**해야 한다.

1. 지역 설정 → 캘린더 표시 (REQ-02)
2. 품목 검색 → 배출 방법 안내 (REQ-03, 04)
3. 지도에 “주변 나눔 물품” 핀 표시 (REQ-10, 단 **조회-only**)

> 게시판 글쓰기/업로드/채팅은 W4~W5에 본격 구현

---

## 2) 전체 타임라인 (Deadline 03.10 / 6주)

| 주차 | 기간 | 목표 | 핵심 산출물 |
|---|---|---|---|
| W1 | 01.27 ~ 02.01 | 기반 구축 | 로그인/주소 + 데이터 Seed |
| W2 | 02.02 ~ 02.08 | 캘린더 완성 + 지도 뼈대 | 캘린더 정확 + 지도 컴포넌트 + nearby 조회 API(임시) |
| W3 | 02.09 ~ 02.15 | 검색 완성 + 메인 페이지 완성 | 메인 화면(검색+캘린더+지도 핀) 데모 가능 |
| W4 | 02.16 ~ 02.22 | 게시판(나눔 데이터 생성원) | 게시판 CRUD + 이미지 |
| W5 | 02.23 ~ 03.01 | 채팅 + 지도 고도화 | 채팅(텍스트) + 지도 핀 “진짜 데이터” 연결 |
| W6 | 03.02 ~ 03.10 | 폴리싱/발표 | 버그픽스 + 시연 시나리오 + 배포 안정화 |

---

## 3) 주간 상세 공정 (Front/Back 병렬)

### ✅ W1: 환경 + 인증 + 주소 + Seed
Back
- (BE-A) 프로젝트 세팅, JWT 인증, `users`
- (BE-B) `user_addresses` CRUD, Seed 파이프라인(엑셀→CSV→DB)

Front
- (FE-A) 로그인/회원가입 UI
- (FE-B) 주소 설정 온보딩 UI(엑셀 기준 단위로 선택)

완료 기준
- 가입→로그인→주소 저장→대표 주소 지정까지 OK
- 오타구 일부 `areas/collection_rules` Seed 준비 완료(또는 W2 초반 완료)

---

### ✅ W2: 캘린더 “정확도” + 지도 “뼈대”
Back
- (BE-B) 캘린더 규칙 해석 엔진(WEEKDAY, NTH_WEEKDAY) + 테스트
- (BE-B) `/api/collection/calendar` 완성
- (BE-A) **지도 조회용 임시 API 제공(nearby READ-only)**
    - 초기에는 DB가 없어도 됨: 더미/seed 기반으로라도 반환
    - `GET /api/share-posts/nearby?lat=&lng=&radiusKm=` (임시 구현 가능)

Front
- (FE-A) FullCalendar 연동 + wasteType 필터
- (FE-B) 메인 페이지 레이아웃 초안 생성
    - 상단 검색 박스(연동 X)
    - 좌하단 캘린더(연동 O)
    - 우하단 지도 컴포넌트(연동은 더미라도 O)
- (FE-B) 지도 SDK 연동(Leaflet 또는 Google Maps) + **핀 렌더링(초기형)**

완료 기준
- “2,4주 금”이 달력에서 정확하게 보임
- 메인 페이지에 “지도 박스”가 떠 있고 핀이 최소 1개 이상 표시됨(더미 가능)

---

### ✅ W3: 검색 완성 + 메인 페이지 1차 완성(데모 가능)
Back
- (BE-B) `items` 검색 API (`q + ward`)
- (BE-A) 지도 nearby API를 “주소 기반”으로 연결 개선
    - 주소에 `lat/lng` 없으면: ward 중심 좌표(임시) 또는 사용자가 위치 허용 시 lat/lng 사용

Front
- (FE-A) 검색 UI + debounce + 상세 안내
- (FE-B) 메인 페이지 통합
    - 검색 결과 → 상세 안내
    - 캘린더는 유지
    - 지도 핀 클릭 → “미리보기 카드”(제목/사진 1장/구 정도)

완료 기준(중요)
- 발표 데모로 “메인 페이지에서 검색 + 캘린더 + 지도 핀” 흐름이 된다.
- 아직 게시판 글쓰기 없어도 OK (지도 핀은 더미/seed 기반이어도 OK)

---

### ✅ W4: 게시판이 ‘지도 데이터의 진짜 원천’이 되게 만들기
Back
- (BE-A) `share_posts`, `share_post_images` + CRUD
- (BE-B) 지역/카테고리 필터 + 상태값(OPEN/RESERVED/COMPLETED)

Front
- (FE-B) 글쓰기(사진 업로드) + 리스트/상세
- (FE-A) 공통 레이아웃/에러/로딩 정리

완료 기준
- 게시글 작성 → 목록 노출 OK
- 게시글에 lat/lng 저장(또는 게시글 작성 시 지도에서 위치 선택)

---

### ✅ W5: 채팅(텍스트) + 지도 고도화(“진짜 주변 데이터”)
Back
- (BE-B) 채팅(WebSocket, TEXT only)
- (BE-A) nearby API를 게시판 데이터 기반으로 고도화
    - 반경 검색/정렬/페이지네이션(가능하면)

Front
- (FE-B) 채팅 UI(방/메시지)
- (FE-A) 지도 핀 커스텀 렌더링 고도화
    - 아이콘/카테고리별 마커
    - 핀 클릭 → 상세/채팅 진입

완료 기준
- 지도에서 실제 게시글이 핀으로 보이고, 상세로 들어가 채팅까지 이어짐

---

### ✅ W6: 개발 중단(기능 추가 금지) — 폴리싱/발표
공통
- 통합 테스트/버그 픽스
- 시연 시나리오 고정(최소 3개)
    1) 내 주소 설정 → 캘린더 확인
    2) 품목 검색 → 배출 안내 확인
    3) 지도에서 물품 찾기 → 상세 → 채팅(또는 게시글 보기)

---

## 4) 리스크 관리: “지도 앞당기기”에 따른 안전장치

### 4.1 W2~W3 지도는 조회-only로 제한
- 글쓰기/이미지/채팅과 엮지 않는다(일정 폭발 방지)
- 지도는 “서비스 형태”를 보여주기 위한 **데모 장치**로 먼저 완성

### 4.2 W4 이후에 게시판 데이터로 교체
- W2~W3에 만든 지도 UI/핀 렌더링을 그대로 쓰고,
- 데이터 소스만 더미 → 실제 게시글로 바꾼다

---

## 5) 최종 체크리스트(03.10)
- [ ] 메인 페이지: 검색 + 캘린더 + 지도(핀) 모두 표시
- [ ] 캘린더: NTH_WEEKDAY 정확
- [ ] 지도: 주변 게시글 핀 표시 + 상세 연결
- [ ] 게시판: CRUD + 이미지 1장 이상
- [ ] 채팅: 텍스트 송수신
